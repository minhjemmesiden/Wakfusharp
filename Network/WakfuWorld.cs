using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Text;

namespace WakSharp.Network
{
    public class WakfuWorld
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public string Language { get; set; }
        public int Population { get; set; }
        public string ip = "127.0.0.1";

        public List<Realm.RealmSession> Players = new List<Realm.RealmSession>();

        public void Encode(WakfuServerMessage packet)
        {
            
            var buffer = packet.Writer;
            string name = "0750686165726973";
            string ip = "3132372E302E302E31";

            string shit = "0000000800000008000000"+name+"0000000D000000"+ip+"00000002000015B4000001BB060000000700000005456672696D000000060000000E38302E3233392E3137332E31353800000002000015B4000001BB05000000060000000744617468757261000000000000001B646174687572612E706C6174666F726D732E77616B66752E636F6D00000002000015B4000001BB000000000500000005416D617261000000030000000E38302E3233392E3137332E31343900000002000015B4000001BB040000000400000005456C626F72000000040000000E38302E3233392E3137332E31353000000002000015B4000001BB0200000003000000034E6F780000000B0000000E38302E3233392E3137332E31353700000002000015B4000001BB03000000020000000952656D696E67746F6E000000010000000E38302E3233392E3137332E31353100000002000015B4000001BB0700000001000000074165726166616C000000000000001B6165726166616C2E706C6174666F726D732E77616B66752E636F6D00000002000015B4000001BB0100000007000000080000000701003202022D31000000430000000600140000000566616C736500D0000000047472756500D10000000431333B3200D20000000000DD0000000D64656661756C743B737465616D01A4000000013800000000070000000701003202022D31000000400000000600140000000566616C736500D0000000047472756500D1000000013600D20000000000DD0000000D64656661756C743B737465616D01A4000000013700000000060000000701003202022D31000000400000000600140000000566616C736500D0000000047472756500D1000000013000D20000000000DD0000000D64656661756C743B737465616D01A4000000013600000000040000000701003202022D31000000400000000600140000000566616C736500D0000000047472756500D1000000013400D20000000000DD0000000D64656661756C743B737465616D01A4000000013400000000030000000701003202022D31000000450000000600140000000566616C736500D0000000047472756500D10000000631313B313B3200D20000000000DD0000000D64656661756C743B737465616D01A4000000013300000000020000000701003202022D31000000440000000600140000000566616C736500D0000000047472756500D10000000000D20000000531323B313400DD0000000D64656661756C743B737465616D01A4000000013200000000010000000701003202022D31000000400000000600140000000566616C736500D0000000047472756500D1000000013000D20000000000DD0000000D64656661756C743B737465616D01A4000000013100";
            //string shit = "000000080000000800000007506861657269730000000D0000003132372E302E302E3100000002000015B4000001BB06000000070000000501BB0100000007000000080000000701003202022D31000000430000000600140000000566616C736500D0000000047472756500D10000000431333B3200D20000000000DD0000000D64656661756C743B737465616D01A400000001380000";
            byte[] test = ConvertHexStringToByteArray(shit);
            buffer.WriteBytes(test);
        }

        public static byte[] ConvertHexStringToByteArray(string hexString)
        {
            if (hexString.Length % 2 != 0)
            {
                throw new ArgumentException(String.Format(CultureInfo.InvariantCulture, "The binary key cannot have an odd number of digits: {0}", hexString));
            }

            byte[] HexAsBytes = new byte[hexString.Length / 2];
            for (int index = 0; index < HexAsBytes.Length; index++)
            {
                string byteValue = hexString.Substring(index * 2, 2);
                HexAsBytes[index] = byte.Parse(byteValue, NumberStyles.HexNumber, CultureInfo.InvariantCulture);
            }

            return HexAsBytes;
        }
    }
}
